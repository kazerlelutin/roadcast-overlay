<div
  class="news-ticker"
  description="Bandeau dÃ©filant pour les actualitÃ©s"
  title="News Ticker"
  script="start_news_ticker, stop_news_ticker"
  tag="news, ticker, bandeau"
>
  <div class="ticker-container">
    <div class="ticker-content" id="ticker-content">
      <span class="ticker-text"
        >ðŸš¨ URGENT - DerniÃ¨res nouvelles en direct â€¢ ActualitÃ©s importantes â€¢
        Informations Ã  suivre</span
      >
    </div>
  </div>
</div>

<script>
  let tickerInterval

  function start_news_ticker() {
    console.log('start_news_ticker')
    const tickerContent = document.getElementById('ticker-content')
    const tickerText = tickerContent.querySelector('.ticker-text')
    const tickerContainer = document.querySelector('.news-ticker')

    // RÃ©initialiser l'affichage
    tickerContainer.style.display = 'block'
    tickerContainer.style.animation = 'none'

    // Animation de dÃ©filement
    tickerContent.style.animation = 'ticker-scroll 20s linear infinite'

    // Changer le texte toutes les 10 secondes
    tickerInterval = setInterval(() => {
      const messages = [
        'ðŸš¨ URGENT - DerniÃ¨res nouvelles en direct â€¢ ActualitÃ©s importantes â€¢ Informations Ã  suivre',
        'ðŸ“° BREAKING NEWS - Ã‰vÃ©nements en cours â€¢ Suivez notre couverture en direct â€¢ Mise Ã  jour continue',
        'âš¡ FLASH INFO - DerniÃ¨re minute â€¢ DÃ©veloppements rÃ©cents â€¢ Informations exclusives',
        'ðŸ”´ LIVE - Ã‰mission en cours â€¢ ActualitÃ©s en temps rÃ©el â€¢ Reportages exclusifs',
      ]
      const tickerText = tickerContent.querySelector('.ticker-text')
      const randomMessage =
        messages[Math.floor(Math.random() * messages.length)]
      tickerText.textContent = randomMessage
    }, 10000)
  }

  function stop_news_ticker() {
    console.log('stop_news_ticker')
    const tickerContent = document.getElementById('ticker-content')
    const tickerContainer = document.querySelector('.news-ticker')

    // Animation de sortie
    tickerContainer.style.animation = 'ticker-exit 0.5s ease-in forwards'

    if (tickerInterval) {
      clearInterval(tickerInterval)
    }

    // Masquer complÃ¨tement aprÃ¨s l'animation
    setTimeout(() => {
      tickerContainer.style.display = 'none'
    }, 500)
  }

  globalThis.start_news_ticker = start_news_ticker
  globalThis.stop_news_ticker = stop_news_ticker
</script>

<style>
  .news-ticker {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 3em;
    background: linear-gradient(90deg, #ff0000, #cc0000);
    color: white;
    overflow: hidden;
    z-index: 1000;
    box-shadow: 0 0.2em 0.5em rgba(0, 0, 0, 0.3);
  }

  .ticker-container {
    position: relative;
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
  }

  .ticker-content {
    position: absolute;
    white-space: nowrap;
    font-size: 1.2em;
    font-weight: bold;
    text-shadow: 0.1em 0.1em 0.2em rgba(0, 0, 0, 0.5);
  }

  .ticker-text {
    display: inline-block;
    padding-right: 2em;
  }

  @keyframes ticker-scroll {
    0% {
      transform: translateX(100%);
    }
    100% {
      transform: translateX(-100%);
    }
  }

  @keyframes ticker-exit {
    0% {
      opacity: 1;
      transform: translateY(0);
    }
    100% {
      opacity: 0;
      transform: translateY(-100%);
    }
  }
</style>
