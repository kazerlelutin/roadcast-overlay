<div class="title" title="Titre" description="Pour afficher un titre" script="start_title, stop_title"
  tag="title, titre" inputs="text:titre_title">

  <div class="title-container" style="animation: none; display: none">
    <div class="logo"></div>
    <div class="title-line" id="title-line"></div>
  </div>
</div>
</div>

<script>
  async function start_title() {
    const titleRes = await fetch('/api/actions/input/titre_title')
    const title = await titleRes.text()

    const titleContainer = document.querySelector('.title-container')
    const titleLine = document.getElementById('title-line')
    titleLine.textContent = title
    titleContainer.style.display = 'flex'
    titleContainer.style.animation = 'title-enter 500ms ease-out'
  }

  function stop_title() {
    const titleContainer = document.querySelector('.title-container')
    titleContainer.style.animation = 'title-exit 500ms ease-in forwards'
    setTimeout(() => {
      titleContainer.style.display = 'none'
    }, 500)
  }

  globalThis.start_title = start_title
  globalThis.stop_title = stop_title
</script>

<style>
  :root {
    --color-bg: #f2f2f2;
    --color-primary: #4088cf;
    --color-white: #fff;
    --color-border: #ccc;
    --color-secondary: #e84855;
    --color-tertiary: #70cbe6;
    --color-text: #000;
    --color-accent: #d9534f;
    --color-valid: #4caf50;
    --color-brain: #d433a9;
    --color-error: #ad2626;
    --color-success: #00ff00;
    --color-info: #17a2b8;
    --color-warning: #ffc107;
    --color-discord: #5468ff;
    --color-discord-hover: #656c85cc;
  }



  .title-container {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 1.7em;
    z-index: 1000;
    color: var(--color-text);
    font-size: 4em;
    background-color: var(--color-bg);
    display: flex;
    gap: 1em;
  }

  .title-line {
    display: flex;
    align-items: center;
    width: 100%;
    height: 100%;

  }

  .logo {
    display: flex;
    width: 2em;
    background-color: var(--color-primary);
    height: 100%;
    position: relative;
    overflow: hidden;
  }

  .logo::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    animation: logo-shine 3s infinite;
  }

  @keyframes logo-shine {
    0% { left: -100%; }
    50% { left: 100%; }
    100% { left: 100%; }
  }

  @keyframes title-enter {
    0% {
      transform: translateY(100%);
      opacity: 0;
    }
    100% {
      transform: translateY(0);
      opacity: 1;
    }
  }

  @keyframes title-exit {
    0% {
      transform: translateY(0);
      opacity: 1;
    }
    100% {
      transform: translateY(100%);
      opacity: 0;
    }
  }

</style>